; SPDX-License-Identifier: BSD-3-Clause
;
; Copyright(c) 2023 Koko Software. All rights reserved.
;
; Author: Adrian Warecki <embedded@kokosoftware.pl>

; PHY Registers
PHCON1			EQU 0x00
PHSTAT1			EQU 0x01
PHCON2			EQU 0x10
PHSTAT2			EQU 0x11
PHIE			EQU 0x12
PHIR			EQU 0x13
PHLCON			EQU 0x14


#define MASK_GEN(size, pos)	(((1 << (size)) - 1) << (pos))
; PHY CONTROL REGISTER 1

; PHY Duplex Mode
PHCON1_PDPXMD_POSN		EQU 8
PHCON1_PDPXMD_SIZE		EQU 1
#define PHCON1_PDPXMD_MASK		MASK_GEN(PHCON1_PDPXMD_SIZE, PHCON1_PDPXMD_POSN)


; PHYSICAL LAYER STATUS REGISTER 1

; PHY Latching Link Status
PHSTAT1_LLSTAT_POSN		EQU 2
PHSTAT1_LLSTAT_SIZE		EQU 1
#define PHSTAT1_LLSTAT_MASK		MASK_GEN(PHSTAT1_LLSTAT_SIZE, PHSTAT1_LLSTAT_POSN)


; PHY CONTROL REGISTER 2
; Improper Ethernet operation may result if HDLDIS or RXAPDIS is cleared, which is the Reset default.
; Always initialize these bits set before using the Ethernet module. */

; RX+/RX- Operating mode
PHCON2_RXAPDIS_POSN		EQU 4
PHCON2_RXAPDIS_SIZE		EQU 1
#define PHCON2_RXAPDIS_MASK		MASK_GEN(PHCON2_RXAPDIS_SIZE, PHCON2_RXAPDIS_POSN)

; PHY Half-Duplex Loopback Disable
PHCON2_HDLDIS_POSN		EQU 8
PHCON2_HDLDIS_SIZE		EQU 1
#define PHCON2_HDLDIS_MASK		MASK_GEN(PHCON2_HDLDIS_SIZE, PHCON2_HDLDIS_POSN)

; PHY Force Linkup
PHCON2_FRCLNK_POSN		EQU 14
PHCON2_FRCLNK_SIZE		EQU 1
#define PHCON2_FRCLNK_MASK		MASK_GEN(PHCON2_FRCLNK_SIZE, PHCON2_FRCLNK_POSN)


; PHYSICAL LAYER STATUS REGISTER 2

; PHY Link Status
PHSTAT2_LSTAT_POSN		EQU 10
PHSTAT2_LSTAT_SIZE		EQU 1
#define PHSTAT2_LSTAT_MASK		MASK_GEN(PHSTAT2_LSTAT_SIZE, PHSTAT2_LSTAT_POSN)

; PHY Collision Status
PHSTAT2_COLSTAT_POSN	EQU 11
PHSTAT2_COLSTAT_SIZE	EQU 1
#define PHSTAT2_COLSTAT_MASK	MASK_GEN(PHSTAT2_COLSTAT_SIZE, PHSTAT2_COLSTAT_POSN)

; PHY Receive Status
PHSTAT2_RXSTAT_POSN		EQU 12
PHSTAT2_RXSTAT_SIZE		EQU 1
#define PHSTAT2_RXSTAT_MASK		MASK_GEN(PHSTAT2_RXSTAT_SIZE, PHSTAT2_RXSTAT_POSN)

; PHY Transmit Status
PHSTAT2_TXSTAT_POSN		EQU 13
PHSTAT2_TXSTAT_SIZE		EQU 1
#define PHSTAT2_TXSTAT_MASK		MASK_GEN(PHSTAT2_TXSTAT_SIZE, PHSTAT2_TXSTAT_POSN)


; PHY MODULE LED CONTROL REGISTER

; LED Pulse Stretching Enable
PHLCON_STRCH_POSN		EQU 1
PHLCON_STRCH_SIZE		EQU 1
#define PHLCON_STRCH_MASK		MASK_GEN(PHLCON_STRCH_SIZE, PHLCON_STRCH_POSN)

; LED Pulse Stretch Time Configuration
PHLCON_LFRQ_POSN		EQU 2
PHLCON_LFRQ_SIZE		EQU 2
#define PHLCON_LFRQ_MASK		MASK_GEN(PHLCON_LFRQ_SIZE, PHLCON_LFRQ_POSN)

; LEDB Configuration bits
PHLCON_LBCFG_POSN		EQU 4
PHLCON_LBCFG_SIZE		EQU 4
#define PHLCON_LBCFG_MASK		MASK_GEN(PHLCON_LBCFG_SIZE, PHLCON_LBCFG_POSN)

; LEDA Configuration bits
PHLCON_LACFG_POSN		EQU 8
PHLCON_LACFG_SIZE		EQU 4
#define PHLCON_LACFG_MASK		MASK_GEN(PHLCON_LACFG_SIZE, PHLCON_LACFG_POSN)

; Write as ‘1’
PHLCON_MUST1_POSN		EQU 12
PHLCON_MUST1_SIZE		EQU 2
#define PHLCON_MUST1_MASK		MASK_GEN(PHLCON_MUST1_SIZE, PHLCON_MUST1_POSN)

PHY_LED_STR_NORMAL		EQU 0			; Stretch LED events by TNSTRCH = 40 ms
PHY_LED_STR_MEDIUM		EQU 1			; Stretch LED events by TMSTRCH = 70 ms
PHY_LED_STR_LONG		EQU 2			; Stretch LED events by TLSTRCH = 140 ms

PHY_LED_TX_ACT			EQU 0001B		; Display transmit activity (stretchable)
PHY_LED_RX_ACT			EQU 0010B		; Display receive activity (stretchable)
PHY_LED_COL_ACT			EQU 0011B		; Display collision activity (stretchable)
PHY_LED_LINK			EQU 0100B		; Display link status
PHY_LED_DUPLEX			EQU 0101B		; Display duplex status
PHY_LED_TX_RX_ACT		EQU 0111B		; Display transmit and receive activity (stretchable)
PHY_LED_ON				EQU 1000B		; On
PHY_LED_OFF				EQU 1001B		; Off
PHY_LED_BLINK_FAST		EQU 1010B		; Blink fast
PHY_LED_BLINK_SLOW		EQU 1011B		; Blink slow
PHY_LED_LINK_RX_ACT		EQU 1100B		; Display link status and receive activity (always stretched)
PHY_LED_LINK_RX_TX_ACT	EQU 1101B		; Display link status and transmit/receive activity (always stretched)


; PHY INTERRUPT ENABLE REGISTER

; PHY Global Interrupt Enable
PHIE_PGEIE_POSN			EQU 1
PHIE_PGEIE_SIZE			EQU 1
#define PHIE_PGEIE_MASK			MASK_GEN(PHIE_PGEIE_SIZE, PHIE_PGEIE_POSN)

; PHY Link Change Interrupt Enable
PHIE_PLNKIE_POSN		EQU 4
PHIE_PLNKIE_SIZE		EQU 1
#define PHIE_PLNKIE_MASK		MASK_GEN(PHIE_PLNKIE_SIZE, PHIE_PLNKIE_POSN)


; PHY INTERRUPT REQUEST (FLAG) REGISTER

; PHY Global Interrupt Flag
PHIR_PGIF_POSN			EQU 2
PHIR_PGIF_SIZE			EQU 1
#define PHIR_PGIF_MASK			MASK_GEN(PHIR_PGIF_SIZE, PHIR_PGIF_POSN)

; PHY Link Change Interrupt Flag
PHIR_PLNKIF_POSN		EQU 4
PHIR_PLNKIF_SIZE		EQU 1
#define PHIR_PLNKIF_MASK		MASK_GEN(PHIR_PLNKIF_SIZE, PHIR_PLNKIF_POSN)
